{"version":3,"sources":["webpack://smartcharts/./chartiq/html2canvas.min.js"],"names":["e","exports","module","define","amd","f","window","global","self","html2canvas","t","n","r","s","o","u","require","a","i","Error","code","l","call","length","1","_dereq_","root","freeExports","freeModule","freeGlobal","punycode","key","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","array","fn","mapDomain","string","split","join","ucs2decode","value","extra","output","counter","charCodeAt","push","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","out","basic","j","index","oldi","w","baseMinusT","codePoint","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","domain","test","slice","toLowerCase","nodeType","hasOwnProperty","this","2","log","cloneNode","node","javascriptEnabled","clone","document","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","canvas","clonedCanvas","width","height","getContext","putImageData","getImageData","cloneCanvasContents","ownerDocument","containerDocument","options","x","y","documentElement","container","createElement","className","style","visibility","position","left","top","border","scrolling","body","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","initNode","clearInterval","scrollTo","navigator","userAgent","scrollY","scrollX","open","write","defaultView","pageXOffset","pageYOffset","restoreOwnerScroll","replaceChild","adoptNode","close","3","Color","g","b","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","4","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","url","link","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","href","then","renderWindow","undefined","setAttribute","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","onclone","renderDocument","onrendered","html2canvasExport","Object","create","doc","support","imageLoader","bounds","max","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","documentHeight","ready","crop","parentNode","removeChild","cleanupContainer","croppedCanvas","x1","x2","y1","y2","drawImage","5","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","6","family","size","baseline","middle","img","span","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","7","Font","FontMetrics","data","getMetrics","8","FrameContainer","sameOrigin","URL","proxyLoad","9","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","10","cors","tainted","crossOrigin","11","ImageContainer","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","replace","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","12","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","13","logger","console","Function","14","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","isPercentage","indexOf","removePx","str","asFloat","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","right","bottom","cssList","property","trim","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","matrix","parseTransformMatrix","transform","matrix3d","parseMatrix","MATRIX_PROPERTY","getValue","option","tagName","selectedIndex","text","placeholder","15","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","renderIndex","asyncRenderer","paint","hasParentClip","ClearTransform","appendToDOM","parseBorders","cssClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","content","display","first","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","message","textContent","applyTextTransform","characters","ucs2","letterRendering","noLetterSpacing","character","word","words","onWordBoundary","characterCode","getWords","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","borderArgs","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","parseCorner","corner1","corner2","context","asInt","nodeContainer","arrays","side","arr","getBorderRadiusData","colorTransform","parseBackgroundClip","16","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","cleanup","random","encodeURIComponent","documentFromHTML","html","parser","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","ProxyURL","supportsCORSImage","17","18","getHideClass","19","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","backgroundRepeatShape","renderBackgroundRepeat","20","taintCtx","textBaseline","variables","hasEntries","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","21","ownStacking","parentStack","22","testRangeBounds","testCORS","testSVG","testElement","selectNode","toDataURL","23","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","24","_native","XMLSerializer","serializeToString","parseSVGDocument","25","capitalize","p1","p2","26","base64","encoded2","encoded3","encoded4","byte1","byte2","byte3","chars","len","clientRect","offsetParent","offsetLeft","definition","prefix_i","block","quote","mode","numParen","appendResult","c","27","28","xhr","status","responseText","statusText","send"],"mappings":"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","file":"html2canvas-09716c.smartcharts.js","sourcesContent":["/*\n  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>\n  Copyright (c) 2016 Niklas von Hertzen\n\n  Released under  License\n*/\n\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(\"html2canvas\",e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.html2canvas=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n/*! http://mths.be/punycode v1.2.4 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^ -~]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /\\x2E|\\u3002|\\uFF0E|\\uFF61/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\twhile (length--) {\n\t\t\tarray[length] = fn(array[length]);\n\t\t}\n\t\treturn array;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings.\n\t * @private\n\t * @param {String} domain The domain name.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\treturn map(string.split(regexSeparators), fn).join('.');\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols to a Punycode string of ASCII-only\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name to Unicode. Only the\n\t * Punycoded parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it on a string that has already been converted to\n\t * Unicode.\n\t * @memberOf punycode\n\t * @param {String} domain The Punycode domain name to convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name to Punycode. Only the\n\t * non-ASCII parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it with a domain that's already in ASCII.\n\t * @memberOf punycode\n\t * @param {String} domain The domain name to convert, as a Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name.\n\t */\n\tfunction toASCII(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.2.4',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n    } catch(e) {\n        log(\"Unable to copy canvas content from\", canvas, e);\n    }\n}\n\nfunction cloneNode(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    if (node.nodeType === 1) {\n        clone._scrollTop = node.scrollTop;\n        clone._scrollLeft = node.scrollLeft;\n        if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n        }\n    }\n\n    return clone;\n}\n\nfunction initNode(node) {\n    if (node.nodeType === 1) {\n        node.scrollTop = node._scrollTop;\n        node.scrollLeft = node._scrollLeft;\n\n        var child = node.firstChild;\n        while(child) {\n            initNode(child);\n            child = child.nextSibling;\n        }\n    }\n}\n\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n    \n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                            documentClone.documentElement.style.top = (-y) + \"px\";\n                            documentClone.documentElement.style.left = (-x) + \"px\";\n                            documentClone.documentElement.style.position = 'absolute';\n                        }\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n        \n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(documentClone.adoptNode(documentElement,true), documentClone.documentElement);\n        documentClone.close();\n    });\n};\n\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    value = value.toLowerCase();\n    var color = colors[value];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\nmodule.exports = Color;\n\n},{}],4:[function(_dereq_,module,exports){\nvar Support = _dereq_('./support');\nvar CanvasRenderer = _dereq_('./renderers/canvas');\nvar ImageLoader = _dereq_('./imageloader');\nvar NodeParser = _dereq_('./nodeparser');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar log = _dereq_('./log');\nvar utils = _dereq_('./utils');\nvar createWindowClone = _dereq_('./clone');\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\nvar getBounds = utils.getBounds;\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCloneIndex = 0;\n\nfunction html2canvas(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        log.options.logging = true;\n        log.options.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n}\n\nhtml2canvas.CanvasRenderer = CanvasRenderer;\nhtml2canvas.NodeContainer = NodeContainer;\nhtml2canvas.log = log;\nhtml2canvas.utils = utils;\n\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\n    return Promise.reject(\"No canvas support\");\n} : html2canvas;\n\nmodule.exports = html2canvasExport;\n\nif (typeof(define) === 'function' && define.amd) {\n    define('html2canvas', [], function() {\n        return html2canvasExport;\n    });\n}\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    var width = x2-x1;\n    var height = y2-y1;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nmodule.exports = DummyImageContainer;\n\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nmodule.exports = Font;\n\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\nvar Font = _dereq_('./font');\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nmodule.exports = FontMetrics;\n\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        var html2canvas = _dereq_('./core');\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nmodule.exports = FrameContainer;\n\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\n// TODO: support hsl[a], negative %/length values\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\nmodule.exports = GradientContainer;\n\n},{}],10:[function(_dereq_,module,exports){\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nmodule.exports = ImageContainer;\n\n},{}],11:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar ImageContainer = _dereq_('./imagecontainer');\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\nvar FrameContainer = _dereq_('./framecontainer');\nvar SVGContainer = _dereq_('./svgcontainer');\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\nvar bind = _dereq_('./utils').bind;\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nmodule.exports = ImageLoader;\n\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\nvar Color = _dereq_('./color');\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = GradientContainer.TYPES.LINEAR;\n\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\n\n    if (hasDirection) {\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            case \"center\":\n                break; // centered by default\n            // Firefox internally converts position keywords to percentages:\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n            default: // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) { // invalid or unhandled value\n                    break;\n                }\n                if (index === 0) {\n                    this.y0 = ratio;\n                    this.y1 = 1 - this.y0;\n                } else {\n                    this.x0 = ratio;\n                    this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n        var value = +colorStopMatch[2];\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n        return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n        };\n    });\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    // calculates and fills-in explicit stop positions when omitted from rule\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\nmodule.exports = LinearGradientContainer;\n\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\nvar logger = function() {\n    if (logger.options.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n};\n\nlogger.options = {logging: false};\nmodule.exports = logger;\n\n},{}],14:[function(_dereq_,module,exports){\nvar Color = _dereq_('./color');\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    } else if (match && match[1] === \"matrix3d\") {\n        var matrix3d = match[2].split(\",\").map(function(s) {\n          return parseFloat(s.trim());\n        });\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n    }\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nmodule.exports = NodeContainer;\n\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar punycode = _dereq_('punycode');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar TextContainer = _dereq_('./textcontainer');\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\nvar FontMetrics = _dereq_('./fontmetrics');\nvar Color = _dereq_('./color');\nvar StackingContext = _dereq_('./stackingcontext');\nvar utils = _dereq_('./utils');\nvar bind = utils.bind;\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = punycode.ucs2.decode(container.node.data);\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\n        return punycode.ucs2.encode([character]);\n    });\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\r\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nmodule.exports = NodeParser;\n\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar utils = _dereq_('./utils');\nvar log = _dereq_('./log');\nvar createWindowClone = _dereq_('./clone');\nvar decode64 = utils.decode64;\n\nfunction Proxy(src, proxyUrl, document) {\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var supportsCORSImage = ('crossOrigin' in new Image());\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nexports.Proxy = Proxy;\nexports.ProxyURL = ProxyURL;\nexports.loadUrlDocument = loadUrlDocument;\n\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\n\nfunction ProxyImageContainer(src, proxy) {\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nmodule.exports = ProxyImageContainer;\n\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nmodule.exports = PseudoElementContainer;\n\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        this.drawShape(data.args, data.color);\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nmodule.exports = Renderer;\n\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\nvar Renderer = _dereq_('../renderer');\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\nvar log = _dereq_('../log');\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    if (!this.options.canvas) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\n    this.ctx.save();\n    shapes.filter(hasEntries).forEach(function(shape) {\n        this.shape(shape).clip();\n    }, this);\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    \n    // Safari does not support SVG pattern fills.  So we'll skip this optimization\n    // KB 2815\n    /*if(image.width === size.width && image.height === size.height) {\n        return image;\n    }*/\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\nmodule.exports = CanvasRenderer;\n\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nmodule.exports = StackingContext;\n\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nmodule.exports = Support;\n\n},{}],23:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar decode64 = _dereq_('./utils').decode64;\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\nmodule.exports = SVGContainer;\n\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\nvar SVGContainer = _dereq_('./svgcontainer');\n\nfunction SVGNodeContainer(node, _native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = _native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nmodule.exports = SVGNodeContainer;\n\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nmodule.exports = TextContainer;\n\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\nexports.smallImage = function smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n};\n\nexports.bind = function(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nexports.decode64 = function(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n};\n\nexports.getBounds = function(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n};\n\nexports.offsetBounds = function(node) {\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n};\n\nexports.parseBackgrounds = function(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nmodule.exports = WebkitGradientContainer;\n\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nmodule.exports = XHR;\n\n},{}]},{},[4])(4)\n});"],"sourceRoot":""}